<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2026-02-25 三 15:31 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>如何清理Linux系统日志</title>
<meta name="author" content="zhuhy" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="/themes/danliden/css/orgbase.css">
<link rel="stylesheet" type="text/css" href="/themes/danliden/css/orgstyle.css">
<script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
<script>LA.init({id:"3J1LdRG6wZ4yWQly",ck:"3J1LdRG6wZ4yWQly"})</script>
<script src="/statics/scripts/dark-mode.js" defer></script>
</head>
<body>
<div id="preamble" class="status">
<hr class="topnav-rule"/>
<header class="site-header">
  <a href="/" class="site-header__brand">
    <h2>LaoZhuZhu</h2>
  </a>
  <nav class="topnav-links" aria-label="Primary">
    <a href="/posts.html">文章</a>
    <span class="topnav-divider" aria-hidden="true">/</span>
    <a class="topnav-icon" href="/rss.xml" aria-label="RSS feed">
      <svg class="rss-icon" viewBox="0 0 24 24" aria-hidden="true" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
        <path d="M5 4h1a14 14 0 0 1 14 14v1"/>
        <path d="M5 11h1a7 7 0 0 1 7 7v1"/>
        <circle cx="6" cy="18" r="2"/>
      </svg>
    </a>
    <span class="topnav-divider" aria-hidden="true">/</span>
    <button id="theme-toggle" class="nav-theme-toggle topnav-icon" type="button" aria-label="Switch to dark mode" aria-pressed="false">
        <svg class="theme-icon" viewBox="0 0 24 24" aria-hidden="true" fill="currentColor">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79Z"/>
        </svg>
    </button>
  </nav>
</header>
<hr class="topnav-rule"/>
</div>
<div id="content" class="content">
<h1 class="title">如何清理Linux系统日志</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgbb6e384">1. 查看日志文件使用量</a></li>
<li><a href="#org6eb59ab">2. 手动清理日志文件</a>
<ul>
<li><a href="#orge634b95">2.1. 清理 N 天前的日志</a></li>
<li><a href="#org71a7560">2.2. 限制日志文件大小</a></li>
<li><a href="#orgda28e52">2.3. 限制日志文件数据</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="preview" id="orgd1aa1e5">
<p>
systemd-journal是Linux的日志系统。它收集和存储内核日志数据、系统日志消息、标准输出和各种系统服务的错误。
</p>

<p>
systemd-journal仅仅把日志集中保存在单一结构的日志文件/var/log 中，由于日志是经历过压缩和格式化的二进制数据，所以在查看和定位的时候很迅速。
</p>

<p>
日志记录的问题是，随着时间的推移，它开始变得越来越大。如果你检查Linux中的磁盘空间，你会发现有时它需要几个GB的空间。
</p>

<p>
本文将介绍如何清理systemd日志，释放Linux系统上的磁盘空间。
</p>

</div>
<div id="outline-container-orgbb6e384" class="outline-2">
<h2 id="orgbb6e384"><span class="section-number-2">1.</span> 查看日志文件使用量</h2>
<div class="outline-text-2" id="text-1">
<p>
你可以使用以下任意一种方法检查日志文件大小。
</p>

<p>
方法一：使用 <code>du</code> 命令
</p>

<div class="org-src-container">
<pre class="src src-shell">du -sh /var/log/journal/
</pre>
</div>

<p>
方法二：使用 <code>journalctl</code> 命令
</p>

<div class="org-src-container">
<pre class="src src-shell">journalctl --disk-usage
</pre>
</div>
</div>
</div>
<div id="outline-container-org6eb59ab" class="outline-2">
<h2 id="org6eb59ab"><span class="section-number-2">2.</span> 手动清理日志文件</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orge634b95" class="outline-3">
<h3 id="orge634b95"><span class="section-number-3">2.1.</span> 清理 N 天前的日志</h3>
<div class="outline-text-3" id="text-2-1">
<p>
以下命令将清理2天前的日志：
</p>

<div class="org-src-container">
<pre class="src src-shell">sudo journalctl --vacuum-time=<span style="color: #a45bad;">2d</span>
</pre>
</div>

<p>
命令中的 <code>d</code> 表示时间单位，你也可以指定其他时间单位：
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">操作符</th>
<th scope="col" class="org-left">单位</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">s</td>
<td class="org-left">秒</td>
</tr>

<tr>
<td class="org-left">m</td>
<td class="org-left">分钟</td>
</tr>

<tr>
<td class="org-left">h</td>
<td class="org-left">小时</td>
</tr>

<tr>
<td class="org-left">d</td>
<td class="org-left">天</td>
</tr>

<tr>
<td class="org-left">weeks</td>
<td class="org-left">周</td>
</tr>

<tr>
<td class="org-left">months</td>
<td class="org-left">月</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org71a7560" class="outline-3">
<h3 id="org71a7560"><span class="section-number-3">2.2.</span> 限制日志文件大小</h3>
<div class="outline-text-3" id="text-2-2">
<p>
使用以下命令可将日志文件大小限制到100M，它将清理日志文件直到低于100M：
</p>

<div class="org-src-container">
<pre class="src src-shell">sudo journalctl --vacuum-size=<span style="color: #a45bad;">100M</span>
</pre>
</div>

<p>
命令中的 <code>M</code> 表示大小单位，你也可以指定其他单位：
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">操作符</th>
<th scope="col" class="org-left">单位</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">G</td>
<td class="org-left">GB</td>
</tr>

<tr>
<td class="org-left">M</td>
<td class="org-left">MB</td>
</tr>

<tr>
<td class="org-left">K</td>
<td class="org-left">KB</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgda28e52" class="outline-3">
<h3 id="orgda28e52"><span class="section-number-3">2.3.</span> 限制日志文件数据</h3>
<div class="outline-text-3" id="text-2-3">
<p>
使用以下命令可将日志文件数据限制到5个：
</p>

<div class="org-src-container">
<pre class="src src-shell">journalctl --vacuum-files=<span style="color: #a45bad;">5</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<div id="footer">
    Last updated 2023-12-15 五 14:08<br>
    Built with <a href="https://www.gnu.org/software/emacs/">Emacs</a> 29.3 (<a href="https://orgmode.org">Org</a> mode 9.7.26).
</div>
</div>
</body>
</html>
